<!-- Sidebar Component - InvestSIO Design System -->
<!-- This is the desktop sidebar (hidden on mobile, shown md+) -->
<nav class="sidebar" role="navigation" aria-label="Menu principal">
  <!-- Sidebar Header -->
  <div class="flex items-center gap-3 px-4 py-6 border-b border-border-default">
    <i class="bi bi-graph-up-arrow text-2xl text-gradient-primary" aria-hidden="true"></i>
    <span class="font-display font-bold text-xl text-gradient-primary">InvestSIO</span>
  </div>

  <!-- Sidebar Navigation -->
  <div class="sidebar-nav mt-2">
    <!-- Dashboard -->
    <a href="{% url 'home' %}"
       class="{% if request.resolver_match.url_name == 'home' %}sidebar-link-active{% else %}sidebar-link{% endif %}"
       {% if request.resolver_match.url_name == 'home' %}aria-current="page"{% endif %}>
      <i class="bi bi-house-door" aria-hidden="true"></i>
      <span>Dashboard</span>
    </a>

    <!-- Corretoras -->
    <a href="{% url 'broker_list' %}"
       class="{% if 'broker' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}"
       {% if 'broker' in request.path %}aria-current="page"{% endif %}>
      <i class="bi bi-safe2" aria-hidden="true"></i>
      <span>Corretoras</span>
    </a>

    <!-- Section Divider: Ativos -->
    <div class="sidebar-section-title mt-6">Ativos</div>

    <!-- Ativos Dropdown -->
    <div x-data="{ ativosOpen: {% if 'ticker' in request.path %}true{% else %}false{% endif %} }">
      <button
        @click="ativosOpen = !ativosOpen"
        class="sidebar-link w-full justify-between"
        :aria-expanded="ativosOpen"
        aria-controls="ativos-submenu"
      >
        <div class="flex items-center gap-3">
          <i class="bi bi-currency-exchange" aria-hidden="true"></i>
          <span>Todos os Ativos</span>
        </div>
        <i class="bi bi-chevron-down text-xs transition-transform duration-200"
           :class="{ 'rotate-180': ativosOpen }"
           aria-hidden="true"></i>
      </button>

      <!-- Submenu Items -->
      <div
        id="ativos-submenu"
        x-show="ativosOpen"
        x-collapse
        class="ml-4 mt-1 space-y-1"
      >
        <a href="{% url 'ticker_list' category='FII' %}"
           class="{% if 'FII' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-building-up" aria-hidden="true"></i>
          <span>FIIs</span>
          <span class="ml-auto text-xs text-text-muted">Fundos Imobiliários</span>
        </a>

        <a href="{% url 'ticker_list' category='Ação' %}"
           class="{% if 'Ação' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-cash-coin" aria-hidden="true"></i>
          <span>Ações BR</span>
          <span class="ml-auto text-xs text-text-muted">Ações Brasileiras</span>
        </a>

        <a href="{% url 'ticker_list' category='Stock' %}"
           class="{% if 'Stock' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-currency-dollar" aria-hidden="true"></i>
          <span>Ações USA</span>
          <span class="ml-auto text-xs text-text-muted">Stocks</span>
        </a>

        <a href="{% url 'ticker_list' category='ETF' %}"
           class="{% if 'ETF' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-graph-up-arrow" aria-hidden="true"></i>
          <span>ETFs</span>
          <span class="ml-auto text-xs text-text-muted">Fundos de Índice</span>
        </a>
      </div>
    </div>

    <!-- Section Divider: Negociações -->
    <div class="sidebar-section-title mt-6">Negociações</div>

    <!-- Negociações Dropdown -->
    <div x-data="{ negociacoesOpen: {% if 'inflow' in request.path or 'outflow' in request.path or 'negociations' in request.path %}true{% else %}false{% endif %} }">
      <button
        @click="negociacoesOpen = !negociacoesOpen"
        class="sidebar-link w-full justify-between"
        :aria-expanded="negociacoesOpen"
        aria-controls="negociacoes-submenu"
      >
        <div class="flex items-center gap-3">
          <i class="bi bi-arrow-left-right" aria-hidden="true"></i>
          <span>Transações</span>
        </div>
        <i class="bi bi-chevron-down text-xs transition-transform duration-200"
           :class="{ 'rotate-180': negociacoesOpen }"
           aria-hidden="true"></i>
      </button>

      <!-- Submenu Items -->
      <div
        id="negociacoes-submenu"
        x-show="negociacoesOpen"
        x-collapse
        class="ml-4 mt-1 space-y-1"
      >
        <a href="{% url 'inflow_list' %}"
           class="{% if 'inflow' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-arrow-down-circle text-emerald-400" aria-hidden="true"></i>
          <span>Compras</span>
        </a>

        <a href="{% url 'outflow_list' %}"
           class="{% if 'outflow' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-arrow-up-circle text-red-400" aria-hidden="true"></i>
          <span>Vendas</span>
        </a>

        <a href="{% url 'negociations' %}"
           class="{% if 'negociations' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-bar-chart" aria-hidden="true"></i>
          <span>Consolidado</span>
        </a>
      </div>
    </div>

    <!-- Section Divider: Dividendos -->
    <div class="sidebar-section-title mt-6">Dividendos</div>

    <!-- Dividendos Dropdown -->
    <div x-data="{ dividendosOpen: {% if 'dividend' in request.path %}true{% else %}false{% endif %} }">
      <button
        @click="dividendosOpen = !dividendosOpen"
        class="sidebar-link w-full justify-between"
        :aria-expanded="dividendosOpen"
        aria-controls="dividendos-submenu"
      >
        <div class="flex items-center gap-3">
          <i class="bi bi-cash" aria-hidden="true"></i>
          <span>Proventos</span>
        </div>
        <i class="bi bi-chevron-down text-xs transition-transform duration-200"
           :class="{ 'rotate-180': dividendosOpen }"
           aria-hidden="true"></i>
      </button>

      <!-- Submenu Items -->
      <div
        id="dividendos-submenu"
        x-show="dividendosOpen"
        x-collapse
        class="ml-4 mt-1 space-y-1"
      >
        <a href="{% url 'dividend_list' %}"
           class="{% if 'dividend_list' in request.path %}sidebar-link-active{% else %}sidebar-link{% endif %}">
          <i class="bi bi-list-ul" aria-hidden="true"></i>
          <span>Lista</span>
        </a>

        <a href="#" class="sidebar-link opacity-50 cursor-not-allowed" title="Em breve" aria-disabled="true">
          <i class="bi bi-bell" aria-hidden="true"></i>
          <span>Alertas</span>
          <span class="ml-auto badge badge-warning text-xs">Em breve</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Sidebar Footer: Quick Actions -->
  <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-border-default bg-bg-surface">
    <div class="space-y-2">
      <a href="{% url 'inflow_create' %}" class="btn btn-success w-full justify-center">
        <i class="bi bi-plus-circle" aria-hidden="true"></i>
        <span>Nova Compra</span>
      </a>

      <a href="{% url 'outflow_create' %}" class="btn btn-danger w-full justify-center">
        <i class="bi bi-dash-circle" aria-hidden="true"></i>
        <span>Nova Venda</span>
      </a>
    </div>

    <!-- Version Info (optional) -->
    <div class="mt-4 pt-4 border-t border-border-default">
      <p class="text-xs text-text-muted text-center">
        InvestSIO v1.0.0
      </p>
    </div>
  </div>
</nav>
