{% comment %}
  Metric Card Component - T-018.3

  Dashboard metric card with gradient backgrounds and optional change indicator.

  Parameters:
    - value: The main metric value to display (required)
    - label: Description label (required)
    - icon: Bootstrap Icon class (e.g., "bi-wallet2")
    - variant: primary|success|danger (default: primary) - determines gradient color
    - change: Optional percentage change value (e.g., "+5.2%")
    - change_positive: Boolean indicating if change is positive (default: true)
    - prefix: Optional prefix to add before value (e.g., "R$ ")
    - suffix: Optional suffix to add after value (e.g., "%")
    - class: Additional CSS classes (optional)
{% endcomment %}

{% comment %} Determine card class based on variant {% endcomment %}
<div class="{% if variant == 'success' %}metric-card-gradient-success{% elif variant == 'danger' %}metric-card-gradient-danger{% else %}metric-card-gradient-primary{% endif %} {{ class }}">
  <div class="flex items-start justify-between">
    <div class="flex-1">
      {% comment %} Label {% endcomment %}
      <p class="metric-label mb-2" id="metric-label-{{ label|slugify }}">{{ label }}</p>

      {% comment %} Value {% endcomment %}
      <p class="metric-value mb-3" aria-labelledby="metric-label-{{ label|slugify }}">{% if prefix %}{{ prefix }}{% endif %}{{ value }}{% if suffix %}{{ suffix }}{% endif %}</p>

      {% comment %} Change Indicator {% endcomment %}
      {% if change %}
        <div class="flex items-center gap-2">
          {% if change_positive %}
            <span class="text-emerald-400 text-sm font-medium flex items-center gap-1" aria-label="Aumento de {{ change }}">
              <i class="bi bi-arrow-up" aria-hidden="true"></i>
              {{ change }}
            </span>
          {% else %}
            <span class="text-red-400 text-sm font-medium flex items-center gap-1" aria-label="Redução de {{ change }}">
              <i class="bi bi-arrow-down" aria-hidden="true"></i>
              {{ change }}
            </span>
          {% endif %}
          <span class="text-text-muted text-xs">vs. mês anterior</span>
        </div>
      {% endif %}
    </div>

    {% comment %} Icon {% endcomment %}
    {% if icon %}
      <div class="flex-shrink-0">
        <div class="w-12 h-12 rounded-lg bg-bg-base/30 flex items-center justify-center">
          <i class="{{ icon }} text-2xl {% if variant == 'success' %}text-emerald-400{% elif variant == 'danger' %}text-red-400{% else %}text-blue-400{% endif %}" aria-hidden="true"></i>
        </div>
      </div>
    {% endif %}
  </div>
</div>
